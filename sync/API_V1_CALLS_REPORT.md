# –û—Ç—á–µ—Ç: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API –≤—ã–∑–æ–≤–æ–≤ api/v1/* –≤ –ø—Ä–æ–µ–∫—Ç–µ

–î–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –º–µ—Å—Ç –≤ –∫–æ–¥–µ, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è HTTP –≤—ã–∑–æ–≤—ã –∫ Firefly III API –ø–æ –ø—É—Ç–∏ `api/v1/*`. –û—Ç—á–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≤–∏–¥–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ –∫–æ–¥—É.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [GET –∑–∞–ø—Ä–æ—Å—ã](#get-–∑–∞–ø—Ä–æ—Å—ã)
2. [POST –∑–∞–ø—Ä–æ—Å—ã](#post-–∑–∞–ø—Ä–æ—Å—ã)
3. [PUT –∑–∞–ø—Ä–æ—Å—ã](#put-–∑–∞–ø—Ä–æ—Å—ã)
4. [DELETE –∑–∞–ø—Ä–æ—Å—ã](#delete-–∑–∞–ø—Ä–æ—Å—ã)
5. [–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞](#—Å–≤–æ–¥–Ω–∞—è-—Ç–∞–±–ª–∏—Ü–∞)

---

## GET –∑–∞–ø—Ä–æ—Å—ã

### üîç –ü—Ä–æ–º–ø—Ç 1: –ù–∞–π—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GET `/api/v1/about`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –≠–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Firefly III API –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–µ—Ä—Å–∏–∏.

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

```
–§–∞–π–ª: src/services/firefly/firefly.ts
```

**–ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. **–ú–µ—Ç–æ–¥ `makeRequest<T>()` + `checkConnection()`**
   - **–°—Ç—Ä–æ–∫–∞:** 234
   - **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `makeRequest` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ `checkConnection` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - **–ö–æ–¥:**
     ```typescript
     const data = await this.makeRequest<FireflyAboutResponse>('/api/v1/about');
     ```
   - **HTTP –º–µ—Ç–æ–¥:** GET
   - **–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
     - `Authorization: Bearer ${token}`
     - `Accept: application/json`
     - `Content-Type: application/json`

2. **–ú–µ—Ç–æ–¥ `testConnection(url, token)`**
   - **–°—Ç—Ä–æ–∫–∞:** 269
   - **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º URL –∏ —Ç–æ–∫–µ–Ω–æ–º
   - **–ö–æ–¥:**
     ```typescript
     const response = await fetch(`${url}/api/v1/about`, {
       method: 'GET',
       headers: {
         'Authorization': `Bearer ${token}`,
         'Accept': 'application/json',
         'Content-Type': 'application/json',
       },
     });
     ```
   - **HTTP –º–µ—Ç–æ–¥:** GET
   - **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

### üîç –ü—Ä–æ–º–ø—Ç 2: –ù–∞–π—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GET `/api/v1/user`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –≠–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ Firefly III.

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

```
–§–∞–π–ª: src/services/firefly/firefly.ts
```

**–ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

1. **–ú–µ—Ç–æ–¥ `getCurrentUser()`**
   - **–°—Ç—Ä–æ–∫–∞:** 254
   - **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - **–ö–æ–¥:**
     ```typescript
     return await this.makeRequest<FireflyUserResponse>('/api/v1/user');
     ```
   - **HTTP –º–µ—Ç–æ–¥:** GET (—á–µ—Ä–µ–∑ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `makeRequest`)
   - **–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
     - `Authorization: Bearer ${token}`
     - `Accept: application/json`
     - `Content-Type: application/json`
   - **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null` –ø—Ä–∏ –æ—à–∏–±–∫–µ

---

## POST –∑–∞–ø—Ä–æ—Å—ã

### üîç –ü—Ä–æ–º–ø—Ç 3: –ù–∞–π—Ç–∏ –≤—Å–µ POST –≤—ã–∑–æ–≤—ã –∫ `/api/v1/transactions`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –≠–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ä–∞—Å—Ö–æ–¥—ã, –¥–æ—Ö–æ–¥—ã, –ø–µ—Ä–µ–≤–æ–¥—ã).

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

```
–§–∞–π–ª: src/services/firefly/transactions.ts
```

**–ú–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

#### 3.1. EUR Expense Transaction (–†–∞—Å—Ö–æ–¥ –≤ –µ–≤—Ä–æ)

- **–°—Ç—Ä–æ–∫–∞:** 183-186
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§—É–Ω–∫—Ü–∏—è `handleExpenseTransaction()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –µ–≤—Ä–æ
- **–ö–æ–¥:**
  ```typescript
  const response = await fireflyService.postRequest<Record<string, unknown>>(
    '/api/v1/transactions',
    transactionData
  );
  ```
- **HTTP –º–µ—Ç–æ–¥:** POST
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `withdrawal`
- **–í–∞–ª—é—Ç–∞:** EUR
- **Payload —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
  - `type: 'withdrawal'`
  - `date`: ISO date string
  - `amount`: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞
  - `description`: –æ–ø–∏—Å–∞–Ω–∏–µ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π –∏ —Å—á–µ—Ç–æ–º
  - `currency_code`: 'EUR' –∏–ª–∏ –¥—Ä—É–≥–∞—è –≤–∞–ª—é—Ç–∞
  - `category_name`: –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `source_name`: –∏—Å—Ö–æ–¥–Ω—ã–π —Å—á–µ—Ç
  - `destination_name`: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ (–∏–ª–∏ 'Expense')
  - `notes`: –∑–∞–º–µ—Ç–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  - `tags`: –º–∞—Å—Å–∏–≤ —Å username
  - `external_id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  - `reconciled`: false
  - `budget_name`: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

#### 3.2. Non-EUR Expense Transaction (–†–∞—Å—Ö–æ–¥ –Ω–µ –≤ –µ–≤—Ä–æ)

- **–°—Ç—Ä–æ–∫–∞:** 232-235
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§—É–Ω–∫—Ü–∏—è `handleExpenseTransaction()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤–∞–ª—é—Ç—ã
- **–ö–æ–¥:**
  ```typescript
  const response = await fireflyService.postRequest<Record<string, unknown>>(
    '/api/v1/transactions',
    transactionData
  );
  ```
- **HTTP –º–µ—Ç–æ–¥:** POST
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `withdrawal`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –í–∫–ª—é—á–∞–µ—Ç `foreign_currency_code` –∏ `foreign_amount` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ EUR
- **Payload –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
  - `foreign_currency_code`: 'EUR'
  - `foreign_amount`: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ –≤ EUR

---

#### 3.3. EUR Income Transaction (–î–æ—Ö–æ–¥ –≤ –µ–≤—Ä–æ)

- **–°—Ç—Ä–æ–∫–∞:** 297-300
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§—É–Ω–∫—Ü–∏—è `handleIncomeTransaction()` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –µ–≤—Ä–æ
- **–ö–æ–¥:**
  ```typescript
  const response = await fireflyService.postRequest<Record<string, unknown>>(
    '/api/v1/transactions',
    transactionData
  );
  ```
- **HTTP –º–µ—Ç–æ–¥:** POST
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `deposit`
- **–í–∞–ª—é—Ç–∞:** EUR
- **Payload —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
  - `type: 'deposit'`
  - `date`: ISO date string
  - `amount`: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞
  - `description`: –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Ö–æ–¥–∞
  - `currency_code`: –∫–æ–¥ –≤–∞–ª—é—Ç—ã
  - `category_name`: –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–µ –∏–º—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  - `destination_name`: —Å—á–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
  - `notes`: –∑–∞–º–µ—Ç–∫–∏
  - `tags`: –º–∞—Å—Å–∏–≤ —Å username
  - `external_id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

---

#### 3.4. Non-EUR Income Transaction (–î–æ—Ö–æ–¥ –Ω–µ –≤ –µ–≤—Ä–æ)

- **–°—Ç—Ä–æ–∫–∞:** 343-346
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§—É–Ω–∫—Ü–∏—è `handleIncomeTransaction()` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
- **–ö–æ–¥:**
  ```typescript
  const response = await fireflyService.postRequest<Record<string, unknown>>(
    '/api/v1/transactions',
    transactionData
  );
  ```
- **HTTP –º–µ—Ç–æ–¥:** POST
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `deposit`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –° –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –≤–∞–ª—é—Ç—ã —á–µ—Ä–µ–∑ foreign_currency_code

---

#### 3.5. Transfer Transaction (–ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏)

- **–°—Ç—Ä–æ–∫–∞:** 448-451
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§—É–Ω–∫—Ü–∏—è `handleTransferTransaction()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏
- **–ö–æ–¥:**
  ```typescript
  const response = await fireflyService.postRequest<Record<string, unknown>>(
    '/api/v1/transactions',
    transactionData
  );
  ```
- **HTTP –º–µ—Ç–æ–¥:** POST
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `transfer`
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –æ–¥–Ω–æ–π –≤–∞–ª—é—Ç–µ
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π (—Ä–∞–∑–Ω—ã–µ –≤–∞–ª—é—Ç—ã –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º –∏ —Ü–µ–ª–µ–≤–æ–º —Å—á–µ—Ç–∞—Ö)
- **Payload —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
  - `type: 'transfer'`
  - `date`: ISO date string
  - `amount`: —Å—É–º–º–∞ —Å–ø–∏—Å–∞–Ω–∏—è
  - `description`: –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
  - `currency_code`: –≤–∞–ª—é—Ç–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å—á–µ—Ç–∞
  - `source_name`: –∏—Å—Ö–æ–¥–Ω—ã–π —Å—á–µ—Ç
  - `destination_name`: —Ü–µ–ª–µ–≤–æ–π —Å—á–µ—Ç
  - `foreign_amount`: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) —Å—É–º–º–∞ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö
  - `foreign_currency_code`: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –≤–∞–ª—é—Ç–∞ —Ü–µ–ª–µ–≤–æ–≥–æ —Å—á–µ—Ç–∞
  - `notes`: –∑–∞–º–µ—Ç–∫–∏
  - `tags`: –º–∞—Å—Å–∏–≤ —Å username
  - `external_id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

---

#### 3.6. Transfer Fee Transactions (–ö–æ–º–∏—Å—Å–∏–∏ –∑–∞ –ø–µ—Ä–µ–≤–æ–¥)

- **–°—Ç—Ä–æ–∫–∞:** 511-514
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –§—É–Ω–∫—Ü–∏—è `handleTransferFee()` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –∫–æ–º–∏—Å—Å–∏–π –∑–∞ –ø–µ—Ä–µ–≤–æ–¥
- **–ö–æ–¥:**
  ```typescript
  const response = await fireflyService.postRequest<Record<string, unknown>>(
    '/api/v1/transactions',
    transactionData
  );
  ```
- **HTTP –º–µ—Ç–æ–¥:** POST
- **–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** `withdrawal`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π (exit fee –∏–ª–∏ entry fee) –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏
- **Payload —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
  - `type: 'withdrawal'`
  - `date`: —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞/–≤—Ä–µ–º—è
  - `amount`: —Å—É–º–º–∞ –∫–æ–º–∏—Å—Å–∏–∏
  - `description`: –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏ (Exit/Entry fee)
  - `currency_code`: –≤–∞–ª—é—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏
  - `source_name`: —Å—á–µ—Ç, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è
  - `destination_name`: 'Fee'
  - `notes`: –∑–∞–º–µ—Ç–∫–∏ –æ —Ç–∏–ø–µ –∫–æ–º–∏—Å—Å–∏–∏
  - `tags`: –º–∞—Å—Å–∏–≤ —Å username
  - `external_id`: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–º–∏—Å—Å–∏–∏

---

### üîç –ü—Ä–æ–º–ø—Ç 4: –ù–∞–π—Ç–∏ –±–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥ –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

```
–§–∞–π–ª: src/services/firefly/firefly.ts
```

**–ë–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥:**

- **–ú–µ—Ç–æ–¥:** `postRequest<T>(endpoint: string, body: unknown)`
- **–°—Ç—Ä–æ–∫–∏:** 100-137
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è POST –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Firefly III API
- **–ö–æ–¥:**
  ```typescript
  public async postRequest<T = unknown>(
    endpoint: string,
    body: unknown
  ): Promise<{ success: boolean; data?: T; error?: string }> {
    const url = `${this.getBaseUrl()}${endpoint}`;
    const token = this.getToken();

    // ... validation and fetch logic

    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Accept': 'application/json',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(body),
    });
  }
  ```
- **–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `{ success: boolean; data?: T; error?: string }`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å —Ñ–ª–∞–≥–æ–º —É—Å–ø–µ—Ö–∞ –∏ –¥–∞–Ω–Ω—ã–º–∏/–æ—à–∏–±–∫–æ–π

---

## PUT –∑–∞–ø—Ä–æ—Å—ã

### üîç –ü—Ä–æ–º–ø—Ç 5: –ù–∞–π—Ç–∏ PUT –º–µ—Ç–æ–¥ –¥–ª—è api/v1/*

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ.

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

```
–§–∞–π–ª: src/services/firefly/firefly.ts
```

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞:**

- **–ú–µ—Ç–æ–¥:** `putRequest<T>(endpoint: string, body: unknown)`
- **–°—Ç—Ä–æ–∫–∏:** 142-179
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø** –≤ –∫–æ–¥–µ (–Ω–µ—Ç –≤—ã–∑–æ–≤–æ–≤)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ Firefly III API
- **–ö–æ–¥:**
  ```typescript
  public async putRequest<T = unknown>(
    endpoint: string,
    body: unknown
  ): Promise<{ success: boolean; data?: T; error?: string }> {
    const url = `${this.getBaseUrl()}${endpoint}`;
    const token = this.getToken();

    // ... validation

    const response = await fetch(url, {
      method: 'PUT',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Accept': 'application/json',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(body),
    });
  }
  ```
- **–í–æ–∑–º–æ–∂–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —Å—á–µ—Ç–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ Firefly III

---

## DELETE –∑–∞–ø—Ä–æ—Å—ã

### üîç –ü—Ä–æ–º–ø—Ç 6: –ù–∞–π—Ç–∏ DELETE –º–µ—Ç–æ–¥ –¥–ª—è api/v1/*

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ.

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**

```
–§–∞–π–ª: src/services/firefly/firefly.ts
```

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞:**

- **–ú–µ—Ç–æ–¥:** `deleteRequest(endpoint: string)`
- **–°—Ç—Ä–æ–∫–∏:** 184-216
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø** –≤ –∫–æ–¥–µ (–Ω–µ—Ç –≤—ã–∑–æ–≤–æ–≤)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–∑ Firefly III API
- **–ö–æ–¥:**
  ```typescript
  public async deleteRequest(
    endpoint: string
  ): Promise<{ success: boolean; error?: string }> {
    const url = `${this.getBaseUrl()}${endpoint}`;
    const token = this.getToken();

    // ... validation

    const response = await fetch(url, {
      method: 'DELETE',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Accept': 'application/json',
        'Content-Type: application/json',
      },
    });
  }
  ```
- **–í–æ–∑–º–æ–∂–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, —Å—á–µ—Ç–æ–≤, –ø—Ä–∞–≤–∏–ª –≤ Firefly III

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| HTTP –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ | –§—É–Ω–∫—Ü–∏—è | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----------|----------|------|---------|---------|---------------|
| **GET** | `/api/v1/about` | `firefly.ts` | 234 | `checkConnection()` | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| **GET** | `/api/v1/about` | `firefly.ts` | 269 | `testConnection()` | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| **GET** | `/api/v1/user` | `firefly.ts` | 254 | `getCurrentUser()` | ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| **POST** | `/api/v1/transactions` | `transactions.ts` | 184 | `handleExpenseTransaction()` | ‚úÖ EUR —Ä–∞—Å—Ö–æ–¥—ã |
| **POST** | `/api/v1/transactions` | `transactions.ts` | 233 | `handleExpenseTransaction()` | ‚úÖ Non-EUR —Ä–∞—Å—Ö–æ–¥—ã |
| **POST** | `/api/v1/transactions` | `transactions.ts` | 298 | `handleIncomeTransaction()` | ‚úÖ EUR –¥–æ—Ö–æ–¥—ã |
| **POST** | `/api/v1/transactions` | `transactions.ts` | 344 | `handleIncomeTransaction()` | ‚úÖ Non-EUR –¥–æ—Ö–æ–¥—ã |
| **POST** | `/api/v1/transactions` | `transactions.ts` | 449 | `handleTransferTransaction()` | ‚úÖ –ü–µ—Ä–µ–≤–æ–¥—ã |
| **POST** | `/api/v1/transactions` | `transactions.ts` | 512 | `handleTransferFee()` | ‚úÖ –ö–æ–º–∏—Å—Å–∏–∏ |
| **PUT** | `/api/v1/*` | `firefly.ts` | 142-179 | `putRequest()` | ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| **DELETE** | `/api/v1/*` | `firefly.ts` | 184-216 | `deleteRequest()` | ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ë–∞–∑–æ–≤—ã–π URL:**
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ `firefly.ts` —á–µ—Ä–µ–∑ `import.meta.env.VITE_BASE_URL`
- –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (–ø—Ä–æ–∫—Å–∏ –≤ development —Ä–µ–∂–∏–º–µ)

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Bearer token
- –¢–æ–∫–µ–Ω –±–µ—Ä–µ—Ç—Å—è –∏–∑ `import.meta.env.VITE_FIREFLY_TOKEN`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–∫–µ–Ω–∞ –≤ –º–µ—Ç–æ–¥–µ `isConfigured()`

**–û–±—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:**
```javascript
{
  'Authorization': `Bearer ${token}`,
  'Accept': 'application/json',
  'Content-Type': 'application/json'
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**GET –∑–∞–ø—Ä–æ—Å—ã (`makeRequest`):**
- –í—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- –§–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏: `API request failed: ${status} ${statusText}`

**POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å—ã:**
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç:
  ```typescript
  { success: boolean; data?: T; error?: string }
  ```
- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –∫–∞–∫ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏, —Ç–∞–∫ –∏ HTTP –æ—à–∏–±–∫–∏

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:
```typescript
await triggerImmediateSync();
```
–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ —Å—á–µ—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:** –§—É–Ω–∫—Ü–∏—è `verifyTransactionExists()` (—Å—Ç—Ä–æ–∫–∞ 528) –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é - —ç—Ç–æ TODO –¥–ª—è –±—É–¥—É—â–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

2. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç:** –î–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –Ω–µ –≤ EUR –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä–≤–∏—Å `syncService.getExchangeRate()` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ Firefly API.

3. **External ID:** –ö–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π `external_id` —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `generateExternalId()`, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `logTransactionOperation()` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞:** 2025-11-13
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** –ù–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–º–º–∏—Ç–∞
**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** Claude AI
